# Name

msgdrop - use [ntfy.sh](https://ntfy.sh) to send encrypted messages

# Synopsis

`msgdrop send [SALT] [PUBKEY] [FILE]...`
`msgdrop recv [SALT] [PRIVKEY]`

# Description

Use [ntfy.sh](https://ntfy.sh) to send and receive encrypted messages using a
"random" topic ID.

The topic ID is generated by taking the `md5sum` of a combination of `date --utc
+%H%b%Y` and the provided SALT. This has the limitation that sending and
receiving must happen within the same hour.  For my purposes, this was an
adequate solution.

`msgdrop send` will join all provided FILEs using `cat(1)` prior to encryption.
If no files are provided, standard input is read instead. The final encrypted
message cannot be more than 4096 bytes due to the [ntfy.sh](https://ntfy.sh)
message limitation.

`msgdrop recv` reads all messages in the topic, decrypts them and sends them to
standard output.

# Options

`-h` Print a help message and exit.

`-v` Display version information.

# Examples

`msgdrop send foobar pubkey file1 file2`

Encrypt the concatenated contents of `file` and `file2` using `pubkey` and send
using **foobar** as the salt.

`echo "Hello world" | msgdrop send foobar pubkey`

Encrypt the string "Hello world" using `pubkey` and send using **foobar** as the
salt.

`msgdrop recv foobar privkey`

Read all messages, using **foobar** as the salt and decrypting with `privkey`.

# Encryption

`msgdrop` requires [age](https://github.com/FiloSottile/age) to perform the encryption and decryption.

## Creating Keypairs

`msgdrop` requires a keypair generated using [age-keygen(1)](https://github.com/FiloSottile/age)
to perform the encryption and decryption.

`age-keygen -o <private> 2> <public>`

Creates a keypair and puts the private key in `<private>` and the public key in
`<public>`.

# See Also

[age(1)](https://github.com/FiloSottile/age), [age-keygen(1)](https://github.com/FiloSottile/age)

